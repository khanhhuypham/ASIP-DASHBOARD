{"ast":null,"code":"/**\n * chartjs-chart-funnel\n * https://github.com/sgratzl/chartjs-chart-funnel\n *\n * Copyright (c) 2021 Samuel Gratzl <samu@sgratzl.com>\n */\n\nimport { BarElement, registry, BarController, Chart, CategoryScale, LinearScale } from 'chart.js';\nimport { merge } from 'chart.js/helpers';\nimport chroma from 'chroma-js';\nfunction inBetween(v, min, max, delta = 10e-6) {\n  return v >= Math.min(min, max) - delta && v <= Math.max(min, max) + delta;\n}\nfunction transpose(m) {\n  return {\n    left: m.top,\n    right: m.bottom,\n    top: m.left,\n    bottom: m.right,\n    horizontal: !m.horizontal\n  };\n}\nclass TrapezoidElement extends BarElement {\n  constructor() {\n    super(...arguments);\n    this.align = 'center';\n    this.next = undefined;\n    this.previous = undefined;\n  }\n  getBounds(useFinalPosition = false) {\n    const {\n      x,\n      y,\n      base,\n      width,\n      height,\n      horizontal\n    } = this.getProps(['x', 'y', 'base', 'width', 'height', 'horizontal'], useFinalPosition);\n    if (horizontal) {\n      const w = Math.abs(x - base);\n      const left = base - (this.align !== 'left' ? w : 0);\n      const right = base + (this.align !== 'right' ? w : 0);\n      const half = height / 2;\n      const top = y - half;\n      const bottom = y + half;\n      return {\n        left,\n        top,\n        right,\n        bottom,\n        horizontal\n      };\n    } else {\n      const h = Math.abs(y - base);\n      const half = width / 2;\n      const left = x - half;\n      const right = x + half;\n      const top = base - (this.align !== 'right' ? h : 0);\n      const bottom = base + (this.align !== 'left' ? h : 0);\n      return {\n        left,\n        top,\n        right,\n        bottom,\n        horizontal\n      };\n    }\n  }\n  inRange(mouseX, mouseY, useFinalPosition) {\n    const bb = this.getBounds(useFinalPosition);\n    const inX = mouseX == null || inBetween(mouseX, bb.left, bb.right);\n    const inY = mouseY == null || inBetween(mouseY, bb.top, bb.bottom);\n    return inX && inY;\n  }\n  inXRange(mouseX, useFinalPosition) {\n    return this.inRange(mouseX, null, useFinalPosition);\n  }\n  inYRange(mouseY, useFinalPosition) {\n    return this.inRange(null, mouseY, useFinalPosition);\n  }\n  getCenterPoint(useFinalPosition) {\n    const {\n      x,\n      y,\n      base,\n      horizontal\n    } = this.getProps(['x', 'y', 'base', 'horizontal'], useFinalPosition);\n    const r = {\n      center: {\n        x: horizontal ? base : x,\n        y: horizontal ? y : base\n      },\n      left: {\n        x: horizontal ? (base + x) / 2 : x,\n        y: horizontal ? y : (base + y) / 2\n      },\n      right: {\n        x: horizontal ? base - (x - base) / 2 : x,\n        y: horizontal ? y : base - (y + base) / 2\n      }\n    }[this.align];\n    return r;\n  }\n  tooltipPosition(useFinalPosition) {\n    return this.getCenterPoint(useFinalPosition);\n  }\n  getRange(axis) {\n    const {\n      width,\n      height\n    } = this.getProps(['width', 'height']);\n    return axis === 'x' ? width : height;\n  }\n  computeWayPoints(useFinalPosition = false) {\n    let dir = this.options.shrinkAnchor;\n    let shrinkFraction = Math.max(Math.min(this.options.shrinkFraction, 1), 0);\n    if (shrinkFraction === 0) {\n      dir = 'none';\n      shrinkFraction = 1;\n    }\n    let bounds = this.getBounds(useFinalPosition);\n    const hor = bounds.horizontal;\n    let nextBounds = this.next && (dir === 'top' || dir === 'middle') ? this.next.getBounds(useFinalPosition) : bounds;\n    let prevBounds = this.previous && (dir === 'bottom' || dir === 'middle') ? this.previous.getBounds(useFinalPosition) : bounds;\n    if (!hor) {\n      bounds = transpose(bounds);\n      nextBounds = transpose(nextBounds);\n      prevBounds = transpose(prevBounds);\n    }\n    const hi = Math.floor((bounds.bottom - bounds.top) * (1 - shrinkFraction));\n    const hiRest = Math.floor((bounds.bottom - bounds.top - hi) / 2);\n    const points = [];\n    const rPoints = [];\n    if (dir === 'none' || dir === 'top') {\n      points.push([bounds.left, bounds.top], [bounds.right, bounds.top]);\n    } else {\n      let pFraction = 1;\n      if (dir === 'middle') {\n        const pHiRest = Math.floor((prevBounds.bottom - prevBounds.top) * shrinkFraction * 0.5);\n        pFraction = hiRest / (pHiRest + hiRest);\n      }\n      points.push([bounds.left + (prevBounds.left - bounds.left) * pFraction, bounds.top], [bounds.right + (prevBounds.right - bounds.right) * pFraction, bounds.top]);\n    }\n    if (dir === 'middle') {\n      points.push([bounds.right, bounds.top + hiRest]);\n      points.push([bounds.right, bounds.bottom - hiRest]);\n      rPoints.push([bounds.left, bounds.top + hiRest]);\n      rPoints.push([bounds.left, bounds.bottom - hiRest]);\n    } else if (dir === 'top' && shrinkFraction < 1) {\n      points.push([bounds.right, bounds.top + hi]);\n      rPoints.push([bounds.left, bounds.top + hi]);\n    } else if (dir === 'bottom' && shrinkFraction < 1) {\n      points.push([bounds.right, bounds.bottom - hi]);\n      rPoints.push([bounds.left, bounds.bottom - hi]);\n    }\n    if (dir === 'none' || dir === 'bottom') {\n      points.push([bounds.right, bounds.bottom], [bounds.left, bounds.bottom]);\n    } else {\n      let nFraction = 1;\n      if (dir === 'middle') {\n        const nHiRest = Math.floor((nextBounds.bottom - nextBounds.top) * shrinkFraction * 0.5);\n        nFraction = hiRest / (nHiRest + hiRest);\n      }\n      points.push([bounds.right + (nextBounds.right - bounds.right) * nFraction, bounds.bottom], [bounds.left + (nextBounds.left - bounds.left) * nFraction, bounds.bottom]);\n    }\n    points.push(...rPoints.reverse());\n    if (!hor) {\n      return points.map(([x, y]) => [y, x]);\n    }\n    return points;\n  }\n  draw(ctx) {\n    const {\n      options\n    } = this;\n    ctx.save();\n    ctx.beginPath();\n    const points = this.computeWayPoints();\n    ctx.moveTo(points[0][0], points[0][1]);\n    for (const p of points.slice(1)) {\n      ctx.lineTo(p[0], p[1]);\n    }\n    if (options.backgroundColor) {\n      ctx.fillStyle = options.backgroundColor;\n      ctx.fill();\n    }\n    if (options.borderColor) {\n      ctx.strokeStyle = options.borderColor;\n      ctx.lineWidth = options.borderWidth;\n      ctx.stroke();\n    }\n    ctx.restore();\n  }\n}\nTrapezoidElement.id = 'trapezoid';\nTrapezoidElement.defaults = {\n  ...BarElement.defaults,\n  shrinkAnchor: 'top',\n  shrinkFraction: 1\n};\nTrapezoidElement.defaultRoutes = BarElement.defaultRoutes;\nfunction pickForegroundColorToBackgroundColor(color, blackColor = '#000000', whiteColor = '#ffffff') {\n  return chroma(color).luminance() > 0.5 ? blackColor : whiteColor;\n}\nfunction blues(i, n) {\n  return chroma.scale('Blues')(i / (n - 1)).hex();\n}\nfunction patchController(type, config, controller, elements = [], scales = []) {\n  registry.addControllers(controller);\n  if (Array.isArray(elements)) {\n    registry.addElements(...elements);\n  } else {\n    registry.addElements(elements);\n  }\n  if (Array.isArray(scales)) {\n    registry.addScales(...scales);\n  } else {\n    registry.addScales(scales);\n  }\n  const c = config;\n  c.type = type;\n  return c;\n}\nclass FunnelController extends BarController {\n  getMinMax(scale, canStack) {\n    const {\n      max\n    } = super.getMinMax(scale, canStack);\n    const r = {\n      center: {\n        min: -max,\n        max\n      },\n      left: {\n        min: 0,\n        max\n      },\n      right: {\n        min: -max,\n        max: 0\n      }\n    }[this.options.align];\n    return r;\n  }\n  update(mode) {\n    super.update(mode);\n    const meta = this._cachedMeta;\n    const elements = meta.data || [];\n    for (let i = 0; i < elements.length; i++) {\n      elements[i].align = this.options.align;\n      elements[i].next = elements[i + 1];\n      elements[i].previous = elements[i - 1];\n    }\n  }\n}\nFunnelController.id = 'funnel';\nFunnelController.defaults = merge({}, [BarController.defaults, {\n  dataElementType: TrapezoidElement.id,\n  barPercentage: 1,\n  align: 'center',\n  categoryPercentage: 0.98\n}]);\nFunnelController.overrides = merge({}, [BarController.overrides, {\n  plugins: {\n    legend: {\n      display: false\n    },\n    colors: {\n      enabled: false\n    },\n    datalabels: {\n      anchor: 'start',\n      textAlign: 'center',\n      font: {\n        size: 20\n      },\n      color: context => {\n        const bgColor = context.chart.getDatasetMeta(context.datasetIndex).data[context.dataIndex].options.backgroundColor;\n        return pickForegroundColorToBackgroundColor(bgColor, Chart.defaults.color, '#ffffff');\n      },\n      formatter: (value, context) => {\n        var _a, _b;\n        const label = (_b = (_a = context.chart.data.labels) === null || _a === void 0 ? void 0 : _a[context.dataIndex]) !== null && _b !== void 0 ? _b : '';\n        return `${label}\\n${(value * 100).toLocaleString()}%`;\n      }\n    }\n  },\n  scales: {\n    _index_: {\n      display: false,\n      padding: 10,\n      grid: {\n        display: false\n      }\n    },\n    _value_: {\n      display: false,\n      beginAtZero: false,\n      grace: 0,\n      grid: {\n        display: false\n      }\n    }\n  },\n  elements: {\n    trapezoid: {\n      backgroundColor(context) {\n        const nData = context.chart.data.datasets[context.datasetIndex].data.length;\n        return blues(context.dataIndex, nData);\n      }\n    }\n  }\n}]);\nclass FunnelChart extends Chart {\n  constructor(item, config) {\n    super(item, patchController('funnel', config, FunnelController, TrapezoidElement, [CategoryScale, LinearScale]));\n  }\n}\nFunnelChart.id = FunnelController.id;\nexport { FunnelChart, FunnelController, TrapezoidElement, blues, pickForegroundColorToBackgroundColor };","map":{"version":3,"names":["inBetween","v","min","max","delta","Math","transpose","m","left","top","right","bottom","horizontal","TrapezoidElement","BarElement","constructor","align","next","undefined","previous","getBounds","useFinalPosition","x","y","base","width","height","getProps","w","abs","half","h","inRange","mouseX","mouseY","bb","inX","inY","inXRange","inYRange","getCenterPoint","r","center","tooltipPosition","getRange","axis","computeWayPoints","dir","options","shrinkAnchor","shrinkFraction","bounds","hor","nextBounds","prevBounds","hi","floor","hiRest","points","rPoints","push","pFraction","pHiRest","nFraction","nHiRest","reverse","map","draw","ctx","save","beginPath","moveTo","p","slice","lineTo","backgroundColor","fillStyle","fill","borderColor","strokeStyle","lineWidth","borderWidth","stroke","restore","id","defaults","defaultRoutes","pickForegroundColorToBackgroundColor","color","blackColor","whiteColor","chroma","luminance","blues","i","n","scale","hex","patchController","type","config","controller","elements","scales","registry","addControllers","Array","isArray","addElements","addScales","c","FunnelController","BarController","getMinMax","canStack","update","mode","meta","_cachedMeta","data","length","merge","dataElementType","barPercentage","categoryPercentage","overrides","plugins","legend","display","colors","enabled","datalabels","anchor","textAlign","font","size","context","bgColor","chart","getDatasetMeta","datasetIndex","dataIndex","Chart","formatter","value","label","_b","_a","labels","toLocaleString","_index_","padding","grid","_value_","beginAtZero","grace","trapezoid","nData","datasets","FunnelChart","item","CategoryScale","LinearScale"],"sources":["/Users/phamkhanhhuy/Documents/OVERATE-VNTECH/TECHRES-PROJECTS/MOBILES/iOS/my-project/ASIP-DASHBOARD/node_modules/chartjs-chart-funnel/src/elements/TrapezoidElement.ts","/Users/phamkhanhhuy/Documents/OVERATE-VNTECH/TECHRES-PROJECTS/MOBILES/iOS/my-project/ASIP-DASHBOARD/node_modules/chartjs-chart-funnel/src/color.ts","/Users/phamkhanhhuy/Documents/OVERATE-VNTECH/TECHRES-PROJECTS/MOBILES/iOS/my-project/ASIP-DASHBOARD/node_modules/chartjs-chart-funnel/src/controllers/patchController.ts","/Users/phamkhanhhuy/Documents/OVERATE-VNTECH/TECHRES-PROJECTS/MOBILES/iOS/my-project/ASIP-DASHBOARD/node_modules/chartjs-chart-funnel/src/controllers/FunnelController.ts"],"sourcesContent":["import {\n  BarElement,\n  CommonElementOptions,\n  BarOptions,\n  ScriptableAndArrayOptions,\n  ChartType,\n  CommonHoverOptions,\n  ScriptableContext,\n} from 'chart.js';\n\nexport interface TrapezoidElementOptions extends CommonElementOptions, Record<string, unknown> {\n  /**\n   * Width of the border\n   * @default 0\n   */\n  borderWidth: number;\n  /**\n   * which side of the bar to shrink: top, right, middle, none\n   * @default top\n   */\n  shrinkAnchor: 'middle' | 'top' | 'bottom' | 'none';\n  /**\n   * fraction (0-1) of the bar that shrinks shrink. 1 all of the bar, 0 none\n   * @default 1\n   */\n  shrinkFraction: number;\n}\n\nexport interface TrapezoidElementProps {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  base: number;\n  horizontal: boolean;\n}\n\nfunction inBetween(v: number, min: number, max: number, delta = 10e-6) {\n  return v >= Math.min(min, max) - delta && v <= Math.max(min, max) + delta;\n}\n\nfunction transpose(m: { horizontal: boolean; left: number; top: number; right: number; bottom: number }) {\n  return {\n    left: m.top,\n    right: m.bottom,\n    top: m.left,\n    bottom: m.right,\n    horizontal: !m.horizontal,\n  };\n}\n\n// need to make it a bar element for proper data label support\nexport class TrapezoidElement extends BarElement {\n  // <TrapezoidElementProps, TrapezoidElementOptions> implements VisualElement {\n  static readonly id = 'trapezoid';\n\n  /**\n   * @hidden\n   */\n  declare options: BarOptions & TrapezoidElementOptions;\n\n  /**\n   * @hidden\n   */\n  static readonly defaults = /* #__PURE__ */ {\n    ...BarElement.defaults,\n    shrinkAnchor: 'top',\n    shrinkFraction: 1,\n  };\n\n  /**\n   * @hidden\n   */\n  static readonly defaultRoutes = /* #__PURE__ */ BarElement.defaultRoutes;\n\n  /**\n   * @hidden\n   */\n  align: 'left' | 'right' | 'center' = 'center';\n\n  /**\n   * @hidden\n   */\n  next: TrapezoidElement | undefined = undefined;\n\n  /**\n   * @hidden\n   */\n  previous: TrapezoidElement | undefined = undefined;\n\n  private getBounds(useFinalPosition = false) {\n    // x ... center not start\n    const { x, y, base, width, height, horizontal } = this.getProps(\n      ['x', 'y', 'base', 'width', 'height', 'horizontal'],\n      useFinalPosition\n    );\n    if (horizontal) {\n      const w = Math.abs(x - base);\n      const left = base - (this.align !== 'left' ? w : 0);\n      const right = base + (this.align !== 'right' ? w : 0);\n      const half = height / 2;\n      const top = y - half;\n      const bottom = y + half;\n      return { left, top, right, bottom, horizontal };\n    } else {\n      const h = Math.abs(y - base);\n      const half = width / 2;\n      const left = x - half;\n      const right = x + half;\n      const top = base - (this.align !== 'right' ? h : 0);\n      const bottom = base + (this.align !== 'left' ? h : 0);\n      return { left, top, right, bottom, horizontal };\n    }\n  }\n\n  /**\n   * @hidden\n   */\n  inRange(mouseX: number | null, mouseY: number | null, useFinalPosition: boolean) {\n    const bb = this.getBounds(useFinalPosition);\n    const inX = mouseX == null || inBetween(mouseX, bb.left, bb.right);\n    const inY = mouseY == null || inBetween(mouseY, bb.top, bb.bottom);\n    return inX && inY;\n  }\n\n  /**\n   * @hidden\n   */\n  inXRange(mouseX: number, useFinalPosition: boolean) {\n    return this.inRange(mouseX, null, useFinalPosition);\n  }\n\n  /**\n   * @hidden\n   */\n  inYRange(mouseY: number, useFinalPosition: boolean) {\n    return this.inRange(null, mouseY, useFinalPosition);\n  }\n\n  /**\n   * @hidden\n   */\n  getCenterPoint(useFinalPosition: boolean) {\n    const { x, y, base, horizontal } = this.getProps(['x', 'y', 'base', 'horizontal'], useFinalPosition);\n    const r = {\n      center: {\n        x: horizontal ? base : x,\n        y: horizontal ? y : base,\n      },\n      left: {\n        x: horizontal ? (base + x) / 2 : x,\n        y: horizontal ? y : (base + y) / 2,\n      },\n      right: {\n        x: horizontal ? base - (x - base) / 2 : x,\n        y: horizontal ? y : base - (y + base) / 2,\n      },\n    }[this.align];\n    return r;\n  }\n\n  /**\n   * @hidden\n   */\n  tooltipPosition(useFinalPosition: boolean): { x: number; y: number } {\n    return this.getCenterPoint(useFinalPosition);\n  }\n\n  /**\n   * @hidden\n   */\n  getRange(axis: string) {\n    const { width, height } = this.getProps(['width', 'height']);\n    // const factor;\n    return axis === 'x' ? width : height;\n  }\n\n  private computeWayPoints(useFinalPosition = false): [number, number][] {\n    let dir = this.options.shrinkAnchor;\n    let shrinkFraction = Math.max(Math.min(this.options.shrinkFraction, 1), 0);\n\n    if (shrinkFraction === 0) {\n      dir = 'none';\n      shrinkFraction = 1;\n    }\n\n    let bounds = this.getBounds(useFinalPosition);\n    const hor = bounds.horizontal;\n    let nextBounds = this.next && (dir === 'top' || dir === 'middle') ? this.next.getBounds(useFinalPosition) : bounds;\n    let prevBounds =\n      this.previous && (dir === 'bottom' || dir === 'middle') ? this.previous.getBounds(useFinalPosition) : bounds;\n\n    if (!hor) {\n      bounds = transpose(bounds);\n      nextBounds = transpose(nextBounds);\n      prevBounds = transpose(prevBounds);\n    }\n\n    const hi = Math.floor((bounds.bottom - bounds.top) * (1 - shrinkFraction));\n    const hiRest = Math.floor((bounds.bottom - bounds.top - hi) / 2);\n\n    const points: [number, number][] = [];\n    const rPoints: [number, number][] = [];\n    if (dir === 'none' || dir === 'top') {\n      points.push([bounds.left, bounds.top], [bounds.right, bounds.top]);\n    } else {\n      let pFraction = 1;\n      if (dir === 'middle') {\n        const pHiRest = Math.floor((prevBounds.bottom - prevBounds.top) * shrinkFraction * 0.5);\n        pFraction = hiRest / (pHiRest + hiRest);\n      }\n      points.push(\n        [bounds.left + (prevBounds.left - bounds.left) * pFraction, bounds.top],\n        [bounds.right + (prevBounds.right - bounds.right) * pFraction, bounds.top]\n      );\n    }\n\n    if (dir === 'middle') {\n      points.push([bounds.right, bounds.top + hiRest]);\n      points.push([bounds.right, bounds.bottom - hiRest]);\n      rPoints.push([bounds.left, bounds.top + hiRest]);\n      rPoints.push([bounds.left, bounds.bottom - hiRest]);\n    } else if (dir === 'top' && shrinkFraction < 1) {\n      points.push([bounds.right, bounds.top + hi]);\n      rPoints.push([bounds.left, bounds.top + hi]);\n    } else if (dir === 'bottom' && shrinkFraction < 1) {\n      points.push([bounds.right, bounds.bottom - hi]);\n      rPoints.push([bounds.left, bounds.bottom - hi]);\n    }\n\n    if (dir === 'none' || dir === 'bottom') {\n      points.push([bounds.right, bounds.bottom], [bounds.left, bounds.bottom]);\n    } else {\n      let nFraction = 1;\n      if (dir === 'middle') {\n        const nHiRest = Math.floor((nextBounds.bottom - nextBounds.top) * shrinkFraction * 0.5);\n        nFraction = hiRest / (nHiRest + hiRest);\n      }\n      points.push(\n        [bounds.right + (nextBounds.right - bounds.right) * nFraction, bounds.bottom],\n        [bounds.left + (nextBounds.left - bounds.left) * nFraction, bounds.bottom]\n      );\n    }\n\n    points.push(...rPoints.reverse());\n\n    if (!hor) {\n      return points.map(([x, y]) => [y, x]);\n    }\n    return points;\n  }\n\n  /**\n   * @hidden\n   */\n  draw(ctx: CanvasRenderingContext2D): void {\n    const { options } = this;\n    ctx.save();\n    ctx.beginPath();\n    const points = this.computeWayPoints();\n    ctx.moveTo(points[0][0], points[0][1]);\n    for (const p of points.slice(1)) {\n      ctx.lineTo(p[0], p[1]);\n    }\n    if (options.backgroundColor) {\n      ctx.fillStyle = options.backgroundColor;\n      ctx.fill();\n    }\n    if (options.borderColor) {\n      ctx.strokeStyle = options.borderColor;\n      ctx.lineWidth = options.borderWidth as number;\n      ctx.stroke();\n    }\n    ctx.restore();\n  }\n}\n\ndeclare module 'chart.js' {\n  export interface ElementOptionsByType<TType extends ChartType> {\n    trapezoid: ScriptableAndArrayOptions<TrapezoidElementOptions & CommonHoverOptions, ScriptableContext<TType>>;\n  }\n}\n","import chroma from 'chroma-js';\n\nexport function pickForegroundColorToBackgroundColor(\n  color: string,\n  blackColor: string = '#000000',\n  whiteColor: string = '#ffffff'\n): string {\n  return chroma(color).luminance() > 0.5 ? blackColor : whiteColor;\n}\n\nexport function blues(i: number, n: number): string {\n  return chroma\n    .scale('Blues')(i / (n - 1))\n    .hex();\n}\n","import { registry, DatasetControllerChartComponent, ChartComponent } from 'chart.js';\n\nexport default function patchController<T, TYPE>(\n  type: TYPE,\n  config: T,\n  controller: DatasetControllerChartComponent,\n  elements: ChartComponent | ChartComponent[] = [],\n  scales: ChartComponent | ChartComponent[] = []\n): T & { type: TYPE } {\n  registry.addControllers(controller);\n  if (Array.isArray(elements)) {\n    registry.addElements(...elements);\n  } else {\n    registry.addElements(elements);\n  }\n  if (Array.isArray(scales)) {\n    registry.addScales(...scales);\n  } else {\n    registry.addScales(scales);\n  }\n  const c = config as any;\n  c.type = type;\n  return c;\n}\n","import {\n  Chart,\n  ChartItem,\n  ScriptableAndArrayOptions,\n  ControllerDatasetOptions,\n  CommonHoverOptions,\n  UpdateMode,\n  ChartConfiguration,\n  Scale,\n  ScriptableContext,\n  CategoryScale,\n  BarController,\n  CoreChartOptions,\n  CartesianScaleTypeRegistry,\n  LinearScale,\n} from 'chart.js';\nimport { merge } from 'chart.js/helpers';\nimport { pickForegroundColorToBackgroundColor, blues } from '../color';\nimport { TrapezoidElement, TrapezoidElementOptions } from '../elements';\nimport patchController from './patchController';\n\nexport interface FunnelChartOptions {\n  /**\n   * alignment of the elements one of center, left, right\n   * @default center\n   */\n  align: 'center' | 'left' | 'right';\n}\n\nexport class FunnelController extends BarController {\n  /**\n   * @hidden\n   */\n  declare options: FunnelChartOptions;\n\n  static readonly id: string = 'funnel';\n\n  /**\n   * @hidden\n   */\n  static readonly defaults: any = /* #__PURE__ */ merge({}, [\n    BarController.defaults,\n    {\n      dataElementType: TrapezoidElement.id,\n      barPercentage: 1,\n      align: 'center',\n      categoryPercentage: 0.98,\n    },\n  ]);\n\n  /**\n   * @hidden\n   */\n  static readonly overrides: any = /* #__PURE__ */ merge({}, [\n    (BarController as any).overrides,\n    {\n      plugins: {\n        legend: {\n          display: false,\n        },\n        colors: {\n          enabled: false,\n        },\n        datalabels: {\n          anchor: 'start',\n          // align: 'start',\n          textAlign: 'center',\n          font: {\n            size: 20,\n          },\n          color: (context: {\n            chart: Chart<'funnel'>;\n            dataset: Chart['data']['datasets'][0];\n            dataIndex: number;\n            datasetIndex: number;\n          }) => {\n            // auto pick color based on background color\n            const bgColor = context.chart.getDatasetMeta(context.datasetIndex).data[context.dataIndex].options\n              .backgroundColor as string;\n            return pickForegroundColorToBackgroundColor(bgColor, Chart.defaults.color as string, '#ffffff');\n          },\n          formatter: (value: number, context: { chart: Chart<'funnel'>; dataIndex: number }) => {\n            const label = context.chart.data.labels?.[context.dataIndex] ?? '';\n            return `${label}\\n${(value * 100).toLocaleString()}%`;\n          },\n        },\n      },\n      scales: {\n        _index_: {\n          display: false,\n          padding: 10,\n          grid: {\n            display: false,\n          },\n        },\n        _value_: {\n          display: false,\n          beginAtZero: false,\n          grace: 0,\n          grid: {\n            display: false,\n          },\n        },\n      },\n      elements: {\n        trapezoid: {\n          backgroundColor(context: ScriptableContext<'funnel'>) {\n            const nData = context.chart.data.datasets[context.datasetIndex].data.length;\n            return blues(context.dataIndex, nData);\n          },\n        },\n      },\n    },\n  ]);\n\n  /**\n   * @hidden\n   */\n  getMinMax(scale: Scale, canStack?: boolean | undefined): { min: number; max: number } {\n    const { max } = super.getMinMax(scale, canStack);\n    const r = {\n      // fake mirroring the scale\n      center: { min: -max, max },\n      left: { min: 0, max },\n      right: { min: -max, max: 0 },\n    }[this.options.align];\n    return r;\n  }\n\n  /**\n   * @hidden\n   */\n  update(mode: UpdateMode): void {\n    super.update(mode);\n    const meta = this._cachedMeta;\n    // create a link\n    const elements = (meta.data || []) as unknown as TrapezoidElement[];\n    for (let i = 0; i < elements.length; i++) {\n      elements[i].align = this.options.align;\n      elements[i].next = elements[i + 1];\n      elements[i].previous = elements[i - 1];\n    }\n  }\n}\n\nexport interface FunnelControllerDatasetOptions\n  extends ControllerDatasetOptions,\n    ScriptableAndArrayOptions<TrapezoidElementOptions, ScriptableContext<'funnel'>>,\n    ScriptableAndArrayOptions<CommonHoverOptions, ScriptableContext<'funnel'>> {}\n\ndeclare module 'chart.js' {\n  interface ChartTypeRegistry {\n    funnel: {\n      chartOptions: FunnelChartOptions & CoreChartOptions<'funnel'>;\n      datasetOptions: FunnelControllerDatasetOptions;\n      defaultDataPoint: number;\n      metaExtensions: Record<string, never>;\n      parsedDataType: { x: number; y: number };\n      scales: keyof CartesianScaleTypeRegistry;\n    };\n  }\n}\n\nexport class FunnelChart<DATA extends unknown[] = number[], LABEL = string> extends Chart<'funnel', DATA, LABEL> {\n  static id = FunnelController.id as 'funnel';\n\n  constructor(item: ChartItem, config: Omit<ChartConfiguration<'funnel', DATA, LABEL>, 'type'>) {\n    super(item, patchController('funnel', config, FunnelController, TrapezoidElement, [CategoryScale, LinearScale]));\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}